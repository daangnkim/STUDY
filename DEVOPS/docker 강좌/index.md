https://www.udemy.com/course/docker-kubernetes-the-practical-guide/ 강의 기록

## docker와 container

도커는 컨테이너를 관리하는 기술

`소프트웨어 유닛`, `코드 패키지`라고 불린다.
독립적인, 표준화된 애플리케이션 패키지를 의미한다. 

컨테이너는 항상 동일한 실행을 보장한다.
예를들면 컨테이너 내 nodejs 버전을 특정 버전으로 lock 시킬 수 있다.
##### 1. 프로덕션 환경과 동일한 개발 환경을 보장한다.
##### 2. 개발자간 동일한 개발 환경을 보장한다.
##### 3. 프로젝트간 동일한 개발 환경을 보장한다.
글로벌하게 버전을 관리하지 않아도 된다.

### virtual machine과의 비교
#### 1. 가상 머신 (Virtual Machines, VM)의 특징 및 한계

- **구조:** 호스트 OS 위에 별도의 가상 OS(Guest OS)를 포함한 독립된 컴퓨터를 통째로 에뮬레이션함.
    
- **장점:** 완벽하게 격리된 환경 제공, 환경별 독립적인 구성 가능.

- **문제점:**
    
    - **자원 낭비:** 각 VM마다 독립된 OS가 필요하여 메모리(RAM), CPU, 하드 디스크 공간을 많이 점유함.
        
    - **성능 저하:** 컴퓨터 위에서 또 다른 컴퓨터를 구동하는 방식이라 실행 속도가 느리고 무거움.
        
    - **중복성:** 동일한 OS 라이브러리가 반복 설치됨.
        
    - **배포의 어려움:** 설정 공유가 복잡하며, 개발 환경과 운영 환경(Production)을 완벽히 일치시키기 위해 많은 노력이 필요함.
        

#### 2. 도커(Docker) 및 컨테이너의 특징

- **구조:** 호스트 OS의 자원을 직접 공유하면서, **도커 엔진(Docker Engine)** 위에서 필요한 코드와 라이브러리만 실행함.
    
- **작동 방식:** OS 전체를 설치하는 대신, OS의 커널을 공유하고 필요한 최소한의 레이어(런타임 등)만 포함.
    
- **장점:**
    
    - **경량성:** OS 수준의 중복이 없어 디스크 공간을 최소화하고 메모리 효율이 좋음.
        
    - **속도:** 가상 머신보다 훨씬 빠르게 시작하고 종료됨.
        
    - **재현성:** 설정 파일(Dockerfile)이나 이미지(Image)를 통해 누구나 동일한 환경을 즉시 구축 가능.
        
    - **이동성:** 개발 환경에서 만든 이미지를 그대로 운영 서버에 배포 가능.
 
### 도커 엔진의 실체와 가상 머신

어떤 방식(Docker Desktop, Linux 직접 설치, Docker Toolbox)으로 설치했든 핵심은 Docker Engine을 내 컴퓨터에 갖추는 것

도커 엔진의 핵심 기술은 리눅스 커널에 의존.

도커는 리눅스의 두 가지 핵심 기술을 기반으로 작동함.

1. Namespaces: 각 컨테이너가 독립된 공간(파일 시스템, 네트워크 등)을 가질 수 있게 격리하는 기술
2. Control Groups (cgroups): 컨테이너가 사용하는 CPU나 메모리 양을 제한하고 관리하는 기술

이 기술들은 리눅스 커널에만 내장돼있고, macOS나 윈도우 커널에는 직접적으로 들어있지 않음.

즉, 도커 엔진은 리눅스용 소프트웨어임.

### 도커 엔진 동작 방식

1. 도커 데스크탑은 아주 작은 리눅스 가상 머신 실행
2. 이 가상 머신 안에 도커 엔진 설치
3. cli에 docker를 명령어를 입력하면 가상 머신 안에서 돌아가는 도커 엔진으로 전달
